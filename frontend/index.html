<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Voice AI Chat</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/static/styles.css">
</head>
<body>
    <div class="container">
        <h1>üéôÔ∏è Voice AI Chat</h1>

        <p class="info-text">
            Click "Start Recording" to speak, then click "Stop" when finished. 
            Your speech will be transcribed and the AI will respond with voice.
        </p>

        <!-- Transcript Card -->
        <div class="card">
            <label class="card-label">
                üìù Your Speech (Transcript)
                <span id="sttBadge" class="streaming-badge stt hidden">
                    <span class="streaming-dot"></span>
                    Transcribing...
                </span>
            </label>
            <div id="transcript" class="text-area transcript-area" readonly>
                Your transcribed speech will appear here...
            </div>
        </div>

        <!-- Response Card -->
        <div class="card">
            <label class="card-label">
                ü§ñ AI Response
                <span id="llmBadge" class="streaming-badge llm hidden">
                    <span class="streaming-dot"></span>
                    Generating...
                </span>
                <span id="speakingBadge" class="streaming-badge speaking hidden">
                    <span class="streaming-dot"></span>
                    üîä Speaking...
                </span>
            </label>
            <div id="response" class="text-area response-area" readonly>
                The AI response will appear here...
            </div>
            <audio id="audioPlayer" class="audio-player hidden" controls></audio>
        </div>

        <!-- Controls -->
        <div class="controls-row">
            <div class="control-group">
                <span class="control-label">Model</span>
                <select id="modelSelect">
                    <option value="llama3.2:1b">llama3.2:1b (Fast)</option>
                    <option value="llama3.2:3b">llama3.2:3b</option>
                    <option value="llama3.1:8b">llama3.1:8b</option>
                </select>
            </div>
            <div class="control-group">
                <label class="toggle-switch">
                    <input type="checkbox" id="handsFreeToggle">
                    <span class="toggle-slider"></span>
                </label>
                <span class="control-label">Hands-free</span>
            </div>
            <div class="status-indicator status-ready" id="statusIndicator">
                <span class="status-dot"></span>
                <span id="statusText">Ready</span>
            </div>
        </div>

        <!-- Volume Meter (for hands-free mode) -->
        <div id="volumeMeterContainer" class="volume-meter-container hidden">
            <span class="control-label">üé§ Voice Level</span>
            <div class="volume-meter">
                <div class="volume-bar" id="volumeBar"></div>
                <div class="volume-threshold" id="volumeThreshold"></div>
            </div>
            <span class="volume-status" id="volumeStatus">Listening...</span>
        </div>

        <!-- Buttons -->
        <div class="btn-group">
            <button id="recordBtn" class="btn btn-primary">üé§ Start Recording</button>
            <button id="clearBtn" class="btn btn-secondary">Clear</button>
        </div>

        <!-- Stats -->
        <div class="stats-row">
            <div class="stat">
                Recording Duration: <span class="stat-value" id="recordingDuration">0.00</span> s
            </div>
            <div class="stat">
                Processing Time: <span class="stat-value" id="processingTime">0.00</span> s
            </div>
        </div>

        <!-- Logs -->
        <div class="logs-section">
            <h3>Runtime Logs</h3>
            <div id="logs" class="logs-container">
                <div class="log-entry">
                    <span class="log-time">[--:--:--]</span>
                    <span class="log-info">Waiting for user input...</span>
                </div>
            </div>
        </div>
    </div>

    <script src="/static/app.js"></script>
</body>
</html>

